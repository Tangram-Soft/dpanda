<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <!-- Meta, title, CSS, favicons, etc. -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>dPanda | Index</title>

    <!-- Bootstrap -->
    <link href="vendors/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="vendors/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <!-- NProgress -->
    <link href="vendors/nprogress/nprogress.css" rel="stylesheet">
    <!-- iCheck -->
    <link href="vendors/iCheck/skins/flat/green.css" rel="stylesheet">
    <!-- bootstrap-progressbar -->
    <link href="vendors/bootstrap-progressbar/css/bootstrap-progressbar-3.3.4.min.css" rel="stylesheet">
    <!-- JQVMap -->
    <link href="vendors/jqvmap/dist/jqvmap.min.css" rel="stylesheet"/>
    <!-- bootstrap-daterangepicker -->
    <link href="vendors/bootstrap-daterangepicker/daterangepicker.css" rel="stylesheet">

    <!-- Custom Theme Style -->
    <link href="build/css/custom.css" rel="stylesheet">
  </head>

  <body class="nav-md">
    <div class="container body">
      <div class="main_container">
        <div class="col-md-3 left_col">
          <div class="left_col scroll-view">
            <div class="clearfix"></div>
            <!-- sidebar menu -->
            <div id="sidebar-menu" class="main_menu_side hidden-print main_menu">
              <div class="menu_section">
                <ul class="nav side-menu">
                  <li><a href="index.html"><i class="fa fa-home"></i> Home</a></li>
                </ul>
              </div>
              <div class="menu_section">
                <h3>Administration</h3>
                <ul class="nav side-menu">
                  <li><a><i class="fa fa-wifi"></i>Network<span class="fa fa-chevron-down"></span></a>
                    <ul class="nav child_menu">
                      <li><a href="vipControl.html">VIP Control</a></li>
                    </ul>
                  </li>
                  <li><a><i class="fa fa-edit"></i>SOAP Web Services<span class="fa fa-chevron-down"></span></a>
                    <ul class="nav child_menu">
                      <li><a href="importWsdl.html">Import WSDLs</a></li>
                    </ul>
                  </li>
                  <li><a><i class="fa fa-edit"></i>RESTful Services<span class="fa fa-chevron-down"></span></a>
                    <ul class="nav child_menu">
                      <li><a href="importWsdl.html">Import Swagger</a></li>
                    </ul>
                  </li>
                  <li><a><i class="fa fa-clock-o"></i>Backup<span class="fa fa-chevron-down"></span></a>
                    <ul class="nav child_menu">
                      <li><a href="importWsdl.html">Applicative Backup</a></li>
                      <li><a href="importWsdl.html">Secure Backup</a></li>
                    </ul>
                  </li>
                  <li><a><i class="fa fa-code-fork"></i>Sync<span class="fa fa-chevron-down"></span></a>
                    <ul class="nav child_menu">
                      <li><a href="importWsdl.html">Sync Settings</a></li>
                      <li><a href="importWsdl.html">Sync Points Control</a></li>
                    </ul>
                  </li>
                </ul>
              </div>
              <div class="menu_section">
                <h3>Development</h3>
                <ul class="nav side-menu">
                  <li><a><i class="fa fa-paper-plane"></i> Web IDE</span></a>
                  </li>
                  <li><a><i class="fa fa-wrench"></i>Tools<span class="fa fa-chevron-down"></span></a>
                    <ul class="nav child_menu">
                      <li><a href="importWsdl.html">XPath Validator</a></li>
                      <li><a href="importWsdl.html">XPath Generator</a></li>
                      <li><a href="importWsdl.html">Base64 Decoder/Encoder</a></li>
                    </ul>
                  </li>
                </ul>
              </div>
              <div class="menu_section">
                <h3>Settings</h3>
                <ul class="nav side-menu">
                  <li><a><i class="fa fa-cogs"></i>Settings</span></a>
                  </li>
                </ul>
              </div>
            </div>
            <!-- /sidebar menu -->
          </div>
        </div>

        <!-- top navigation -->
        <div class="top_nav">
          <div class="nav_menu">
            <nav>
              <div class="nav toggle">
                <a id="menu_toggle"><i class="fa fa-bars"></i></a>
              </div>
              <div class="nav nav_title">
                <a href="index.html" class="site_title"><img src="images/dpanda-navbar.gif" style="height: 40px; width:auto; padding-right: 3px;"></img><span>dPanda</span></a>
              </div>
              <ul class="nav navbar-nav navbar-right">
                <li class="">
                  <a href="javascript:;" class="user-profile dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                    admin
                    <span class=" fa fa-angle-down"></span>
                  </a>
                  <ul class="dropdown-menu dropdown-usermenu pull-right">
                    <li>
                      <a href="javascript:;">
                        <span>Settings</span>
                      </a>
                    </li>
                    <li><a href="javascript:;">Help</a></li>
                    <li><a href="login.html"><i class="fa fa-sign-out pull-right"></i> Log Out</a></li>
                  </ul>
                </li>
              </ul>
            </nav>
          </div>
        </div>
        <!-- /top navigation -->

        <!-- page content -->
        <div class="right_col" role="main">
          <div class="row tile_count">
            <div class="col-md-3 col-sm-4 col-xs-6 tile_stats_count">
              <span class="count_top"><i class="fa fa-user"></i> Total Connections</span>
              <div class="count">2500</div>
            </div>
            <div class="col-md-3 col-sm-4 col-xs-6 tile_stats_count">
              <span class="count_top"><i class="fa fa-user"></i> Filesystem Status</span>
              <div class="count">2500</div>
            </div>
            <div class="col-md-3 col-sm-4 col-xs-6 tile_stats_count">
              <span class="count_top"><i class="fa fa-clock-o"></i> Connected Users</span>
              <div class="count">123.50</div>
            </div>
            <div class="col-md-3 col-sm-4 col-xs-6 tile_stats_count">
              <span class="count_top"><i class="fa fa-user"></i> Firmware Details</span>
              <div class="count">2,500</div>
            </div>
          </div>
          <div class="row tile_count">
            <div class="row">
              <div class="">
                <div class="col-md-4 col-sm-4 col-xs-12">
                  <div class="x_panel">
                    <div class="x_title">
                      <h2>CPU</h2>
                      <ul class="nav navbar-right panel_toolbox">
                        <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                        </li>
                        <li class="dropdown">
                        </li>
                        <li><a class="close-link"><i class="fa fa-close"></i></a>
                        </li>
                      </ul>
                      <div class="clearfix"></div>
                    </div>
                    <div class="x_content">
              		    <div id="systemCpu" class="line-chart-container"></div>
                    </div>
                  </div>
                </div>
                <div class="col-md-4 col-sm-4 col-xs-12">
                  <div class="x_panel">
                    <div class="x_title">
                      <h2>Memory</h2>
                      <ul class="nav navbar-right panel_toolbox">
                        <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                        </li>
                        <li class="dropdown">
                        </li>
                        <li><a class="close-link"><i class="fa fa-close"></i></a>
                        </li>
                      </ul>
                      <div class="clearfix"></div>
                    </div>
                    <div class="x_content">
              		    <div id="systemMemory" class="line-chart-container"></div>
                    </div>
                  </div>
                </div>
                <div class="col-md-4 col-sm-4 col-xs-12">
                  <div class="x_panel">
                    <div class="x_title">
                      <h2>Load</h2>
                      <ul class="nav navbar-right panel_toolbox">
                        <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                        </li>
                        <li class="dropdown">
                        </li>
                        <li><a class="close-link"><i class="fa fa-close"></i></a>
                        </li>
                      </ul>
                      <div class="clearfix"></div>
                    </div>
                    <div class="x_content">
                      <div id="systemLoad" class="line-chart-container"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- /page content -->

        <!-- footer content -->
        <footer>
          <div class="pull-right">
            Tangram's dPanda - DataPower Administration and Development Applications</a>
          </div>
          <div class="clearfix"></div>
        </footer>
        <!-- /footer content -->
      </div>
    </div>

    <!-- jQuery -->
    <script src="vendors/jquery/dist/jquery.min.js"></script>
    <!-- Bootstrap -->
    <script src="vendors/bootstrap/dist/js/bootstrap.min.js"></script>
    <!-- FastClick -->
    <script src="vendors/fastclick/lib/fastclick.js"></script>
    <!-- NProgress -->
    <script src="vendors/nprogress/nprogress.js"></script>
    <!-- Chart.js -->
    <script src="vendors/Chart.js/dist/Chart.min.js"></script>
    <!-- gauge.js -->
    <script src="vendors/gauge.js/dist/gauge.min.js"></script>
    <!-- bootstrap-progressbar -->
    <script src="vendors/bootstrap-progressbar/bootstrap-progressbar.min.js"></script>
    <!-- iCheck -->
    <script src="vendors/iCheck/icheck.min.js"></script>
    <!-- Skycons -->
    <script src="vendors/skycons/skycons.js"></script>
    <!-- Flot -->
    <script src="vendors/Flot/jquery.flot.js"></script>
    <script src="vendors/Flot/jquery.flot.pie.js"></script>
    <script src="vendors/Flot/jquery.flot.time.js"></script>
    <script src="vendors/Flot/jquery.flot.stack.js"></script>
    <script src="vendors/Flot/jquery.flot.resize.js"></script>
    <!-- Flot plugins -->
    <script src="vendors/flot.orderbars/js/jquery.flot.orderBars.js"></script>
    <script src="vendors/flot-spline/js/jquery.flot.spline.min.js"></script>
    <script src="vendors/flot.curvedlines/curvedLines.js"></script>
    <!-- DateJS -->
    <script src="vendors/DateJS/build/date.js"></script>
    <!-- JQVMap -->
    <script src="vendors/jqvmap/dist/jquery.vmap.js"></script>
    <script src="vendors/jqvmap/dist/maps/jquery.vmap.world.js"></script>
    <script src="vendors/jqvmap/examples/js/jquery.vmap.sampledata.js"></script>
    <!-- bootstrap-daterangepicker -->
    <script src="vendors/moment/min/moment.min.js"></script>
    <script src="vendors/bootstrap-daterangepicker/daterangepicker.js"></script>

    <!-- Custom Theme Scripts -->
    <script src="build/js/custom.min.js"></script>
    <script type="text/javascript">

  	$(function() {

      var currentLoad = 0;
      var currentMemory = 0;
      var currentCpu = 0;

      var loadData = [];
      var memoryData = [];
      var cpuData = [];

      var totalPoints = 50;

      function getSystemUsage() {
        if (loadData.length > 0) {
          loadData = loadData.slice(1);
        }
        if (memoryData.length > 0) {
          memoryData = memoryData.slice(1);
        }
        if (cpuData.length > 0) {
          cpuData = cpuData.slice(1);
        }

        var dpandaApiGetSystemUsage = '/dpanda/api/getSystemUsageTable';

        $.ajax({
          type: 'GET',
          url: dpandaApiGetSystemUsage,
          dataType: 'json',
          processData: false,
          contentType: 'application/json',
          error: function() {
            //Handle error
          },
          success: function(systemUsageResponse) {
            console.log(systemUsageResponse);
            currentLoad = systemUsageResponse['Load'];
            currentMemory = systemUsageResponse['Memory'];
            currentCpu = systemUsageResponse['CPU'];
          }
        });

        while (loadData.length < totalPoints) {
  				loadData.push(currentLoad);
  			}

        while (memoryData.length < totalPoints) {
          memoryData.push(currentMemory);
        }

        while (cpuData.length < totalPoints) {
          cpuData.push(currentCpu);
        }

        var graphLoadData = [];
        for (var i = 0; i < loadData.length; ++i) {
          graphLoadData.push([i, loadData[i]])
        }

        var graphMemoryData = [];
        for (var i = 0; i < memoryData.length; ++i) {
          graphMemoryData.push([i, memoryData[i]])
        }

        var graphCpuData = [];
        for (var i = 0; i < cpuData.length; ++i) {
          graphCpuData.push([i, cpuData[i]])
        }

        var res = [
          {
            data: graphLoadData,
            color: "#f44242"
          },
          {
            data: graphMemoryData,
            color: "#f44242"
          },
          {
            data: graphCpuData,
            color: "#f44242"
          }
        ];

        return res;
      }

  		var updateInterval = 5000;

      var plotSystemLoad = $.plot("#systemLoad", [ getSystemUsage()[0] ], {
  			series: {
  				shadowSize: 0	// Drawing is faster without shadows
  			},
  			yaxis: {
  				min: 0,
  				max: 100
  			},
  			xaxis: {
  				show: false
  			}
  		});

      var plotSystemMemory = $.plot("#systemMemory", [ getSystemUsage()[1] ], {
        series: {
          shadowSize: 0	// Drawing is faster without shadows
        },
        yaxis: {
          min: 0,
          max: 100
        },
        xaxis: {
          show: false
        }
      });

      var plotSystemCpu = $.plot("#systemCpu", [ getSystemUsage()[2] ], {
        series: {
          shadowSize: 0	// Drawing is faster without shadows
        },
        yaxis: {
          min: 0,
          max: 100
        },
        xaxis: {
          show: false
        }
      });

      function updateSystemUsage() {

        var systemUsageTable = getSystemUsage();
  			plotSystemLoad.setData([systemUsageTable[0]]);
  			plotSystemLoad.draw();

        plotSystemMemory.setData([systemUsageTable[1]]);
        plotSystemMemory.draw();

        plotSystemCpu.setData([systemUsageTable[2]]);
        plotSystemCpu.draw();

        setTimeout(updateSystemUsage, updateInterval);
  		}

  		updateSystemUsage();

  	});

  	</script>
    <script>
      $(document).ready(function(){
        var options = {
          legend: false,
          responsive: false
        };

        new Chart(document.getElementById("tcpSummary"), {
          type: 'doughnut',
          tooltipFillColor: "rgba(51, 51, 51, 0.55)",
          data: {
            labels: [
              "established",
              "syn_sent",
              "syn_received",
              "fin_wait_1",
              "fin_wait_2",
              "time_wait",
              "closed",
              "close_wait",
              "last_ack",
              "listen",
              "closing"
            ],
            datasets: [{
              data: [15, 20, 30, 10, 30 , 100, 30 ,20, 14, 11, 22],
              backgroundColor: [
                "#BDC3C7",
                "#9B59B6",
                "#E74C3C",
                "#26B99A",
                "#3498DB"
              ],
              hoverBackgroundColor: [
                "#CFD4D8",
                "#B370CF",
                "#E95E4F",
                "#36CAAB",
                "#49A9EA"
              ]
            }]
          },
          options: options
        });
      });
    </script>

  </body>
  </html>
</html>

</html>
